= Dotfiles
:toc: left
:toclevels: 3
:icons: font

A Bazel-managed dotfiles repository for consistent environment setup across platforms.

== Overview

This repository contains configuration for various development tools managed using Bazel.
It follows a structured approach to configuration management, allowing for platform-specific
and variant-specific setups.

== Repository structure

* *bzl/*: Starlark rules, macros, providers, and Bazel extensions
** bzl/rules/: Common rules and macros
** bzl/providers/: Provider definitions
** bzl/platforms/: Platform detection and configuration
** bzl/variants/: Variant (work/personal) configuration helpers

* *src/*: Source files and implementations
** src/dotfiles/: Tool-specific configurations
*** src/dotfiles/tmux/: All tmux configuration in one place
*** src/dotfiles/git/: All git configuration in one place
*** src/dotfiles/vim/: All vim/neovim configuration in one place
*** src/dotfiles/zsh/: All zsh configuration in one place
** src/packages/: Package management definitions
** src/lib/: Custom programs and utilities

* *bin/*: Helper scripts (minimal usage)

* *config/*: Build settings and configuration
** config/platforms/: Platform-specific BUILD.bazel files
** config/variants/: Usage scenario targets (work, personal, server)

* *test/*: Test fixtures and validation tests

== Getting started

=== Prerequisites

* Bazel 7.0 or higher
* Git

=== Installation

[source,bash]
----
# Build all dotfiles
bazel build //...

# Install dotfiles for your variant
bazel run //:work  # For work environment
bazel run //:personal  # For personal environment
bazel run //:server  # For server environment
----

== Development

=== Adding a new tool

1. Create a new directory under `src/dotfiles/`
2. Add configuration files in the tool directory
3. Create a BUILD.bazel file with appropriate targets
4. Update variant configurations in `config/variants/`

=== Testing

[source,bash]
----
# Run all tests
bazel test //...
----

== Design principles

* Use Bazel exclusively for configuration management
* No bespoke shell scripts
* Support multiple platforms and usage scenarios
* Keep configurations modular and reusable
* Use provider interfaces for strongly-typed configuration

== License

This project is licensed under the MIT License - see the LICENSE file for details.