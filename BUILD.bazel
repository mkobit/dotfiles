load("@rules_python//python:pip.bzl", "compile_pip_requirements")
load("//rules:linting.bzl", "bazel_files_format", "bazel_files_format_test")
load("//rules:lsp_simple.bzl", "setup_simple_lsp")

package(default_visibility = ["//visibility:public"])

compile_pip_requirements(
    name = "requirements",
    src = "requirements.in",
    requirements_txt = "requirements.lock.txt",
)

# Format all Bazel files in the repository
bazel_files_format(name = "format")

# Test that all Bazel files are properly formatted
bazel_files_format_test(
    name = "format_test",
)

# Set up simplified LSP configuration for the project
setup_simple_lsp(
    name = "lsp_setup",
)

# Test suite for configuration validation
test_suite(
    name = "config_tests",
    tests = [
        ":format_test",
        "//.agents/claude:claude_settings_schema_test",
        "//src/git:selected_gitconfig_test",
        "//src/tmux:tmux_conf_test",
        "//src/vim:vimrc_test",
        "//src/zsh:config_test",
    ],
)
