{{- $hasMiseTools := false -}}
{{- range $tool, $config := .mise.global_tools -}}
  {{- if eq $config.installation "mise" -}}
    {{- $hasMiseTools = true -}}
  {{- end -}}
{{- end -}}
{{- if $hasMiseTools -}}
[tools]
{{- range $tool, $config := .mise.global_tools -}}
  {{- if eq $config.installation "mise" }}
    {{- if hasKey $config "postinstall" }}
{{ $tool | quote }} = { version = "{{ $config.version }}", postinstall = "{{ $config.postinstall }}" }
    {{- else }}
{{ $tool | quote }} = "{{ $config.version }}"
    {{- end }}
  {{- end -}}
{{- end -}}
{{- end -}}

{{- if hasKey .mise "settings" }}
[settings]
{{- range $key, $value := .mise.settings }}
{{ $key }} = {{ $value | toJson }}
{{- end }}
{{- end -}}
