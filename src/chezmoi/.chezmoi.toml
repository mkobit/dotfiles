# chezmoi configuration file
# See: https://www.chezmoi.io/reference/configuration-file/

[git]
    autoCommit = false
    autoPush = false

# Build all targets before reading source state
# This ensures all artifacts exist before .chezmoiexternals tries to reference them
# Chezmoi will then copy the built artifacts to their destinations
[hooks.read-source-state.pre]
    # We must explicitly change to the source directory (which is inside the Bazel workspace)
    # because chezmoi does not guarantee the working directory of the hook.
    # Bazel will then walk up the directory tree to find the workspace root.
    command = "sh"
    args = ["-c", "cd \"$CHEZMOI_SOURCE_DIR\" && bazel build //..."]
