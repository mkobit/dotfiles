{{- with .ripgrep -}}
{{- if eq .installation "external-sources" -}}
{{- $platform := printf "%s_%s" $.chezmoi.os $.chezmoi.arch -}}
{{- $target := "" -}}
{{- if eq $.chezmoi.os "darwin" -}}
  {{- $target = printf "%s-apple-darwin" (eq $.chezmoi.arch "arm64" | ternary "aarch64" "x86_64") -}}
{{- else -}}
  {{- if eq $.chezmoi.arch "arm64" -}}
    {{- $target = "aarch64-unknown-linux-gnu" -}}
  {{- else -}}
    {{- $target = "x86_64-unknown-linux-musl" -}}
  {{- end -}}
{{- end }}
["rg"]
type = "archive-file"
url = {{ gitHubReleaseAssetURL "BurntSushi/ripgrep" .version (printf "ripgrep-%s-%s.tar.gz" .version $target) | quote }}
path = "ripgrep-{{ .version }}-{{ $target }}/rg"
executable = true
{{- if and (hasKey .checksums $platform) (ne (trim (index .checksums $platform)) "") }}
checksum.sha256 = "{{ index .checksums $platform }}"
{{- end }}
{{- end -}}
{{- end }}
