# FZF Tab Completion for Bash
# https://github.com/lincheney/fzf-tab-completion

FZF_TAB_COMPLETION_DIR="$HOME/.dotfiles/external/fzf-tab-completion"

if [[ -f "$FZF_TAB_COMPLETION_DIR/bash/fzf-bash-completion.sh" ]]; then
    source "$FZF_TAB_COMPLETION_DIR/bash/fzf-bash-completion.sh"

    # Bind Tab to fzf completion
    bind -x '"\t": fzf_bash_completion'

    # Ensure cycling is enabled in FZF default options if not already present
    if [[ "$FZF_DEFAULT_OPTS" != *"--cycle"* ]]; then
        export FZF_DEFAULT_OPTS="$FZF_DEFAULT_OPTS --cycle"
    fi

    # Optional: Configure fzf-tab-completion behavior
    # export FZF_COMPLETION_AUTO_COMMON_PREFIX=true
else
    # Only warn if interactive
    if [[ $- == *i* ]]; then
        echo "fzf-tab-completion not found at $FZF_TAB_COMPLETION_DIR"
    fi
fi
