= TMUX Configuration Module
:toc: left
:icons: font
:source-highlighter: rouge
:toclevels: 3

== Overview

This module provides tmux configuration as part of the dotfiles Bazel system.

== Usage

=== Building the Configuration

[source,bash]
----
# Build the default tmux configuration
bazel build //modules/tmux:tmux

# Build variant-specific configurations
bazel build //modules/tmux:work_tmux
bazel build //modules/tmux:personal_tmux
----

=== Getting the Path for Source-File

To get the path to the generated tmux configuration file that you can source in your existing `~/.tmux.conf`:

[source,bash]
----
# Build and display the path information
bazel build //modules/tmux:print_path
cat bazel-bin/modules/tmux/tmux_path.txt
----

=== Manual Installation

Add the following to your `~/.tmux.conf` file (replace the path with the actual output from the command above):

[source,bash]
----
# Source the Bazel-generated tmux configuration
source-file /path/to/bazel-bin/modules/tmux/tmux.conf
----

== Features

The tmux configuration includes:

* Cross-platform clipboard integration
* Vim-style key bindings for navigation and copy mode
* Improved status bar configuration
* Enhanced history settings
* Mouse mode support
* Custom key bindings for window and pane management

== Key Bindings

[cols="1,2,2"]
|===
|Key|Action|Description

|`Ctrl+a`
|Prefix
|The main prefix key (replaces default `Ctrl+b`)

|`Prefix r`
|Reload config
|Reload the tmux configuration file

|`Prefix \|`
|Split horizontally
|Split the current pane horizontally

|`Prefix -`
|Split vertically
|Split the current pane vertically

|`Prefix h/j/k/l`
|Navigate panes
|Move between panes using vim-style navigation

|`Alt+Arrow`
|Navigate panes
|Move between panes without using the prefix

|`Shift+Arrow`
|Switch windows
|Move between windows without using the prefix

|`Prefix a`
|Last window
|Jump to the last active window
|===

== Customization

The configuration supports variant-specific customization through the `%%VARIANT%%` placeholder in the template.

== Testing

=== Building and Testing Locally

To test the tmux configuration without modifying your existing setup:

[source,bash]
----
# Build the configuration
bazel build //modules/tmux:tmux_conf

# View the generated configuration
cat bazel-bin/modules/tmux/tmux.conf

# Test the configuration in a new tmux session
tmux -f bazel-bin/modules/tmux/tmux.conf new-session -d -s test_session

# Attach to the test session
tmux attach-session -t test_session

# After testing, kill the session (from within tmux, press Ctrl+a then type):
# :kill-session
----

=== Variant Testing

Test different variants of the configuration:

[source,bash]
----
# Build variant-specific configurations
bazel build //modules/tmux:work_tmux_conf
bazel build //modules/tmux:personal_tmux_conf

# Test work variant
tmux -f bazel-bin/modules/tmux/work_tmux.conf new-session -d -s work_test
tmux attach -t work_test

# Test personal variant
tmux -f bazel-bin/modules/tmux/personal_tmux.conf new-session -d -s personal_test
tmux attach -t personal_test
----

=== Testing Source File Method

Test using the source-file approach:

[source,bash]
----
# Create a temporary tmux config for testing
echo "source-file $(pwd)/bazel-bin/modules/tmux/tmux.conf" > /tmp/test_tmux.conf

# Launch tmux with the temporary config
tmux -f /tmp/test_tmux.conf new-session

# Clean up after testing
rm /tmp/test_tmux.conf
----